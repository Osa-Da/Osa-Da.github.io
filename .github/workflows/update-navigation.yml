name: –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é

on:
  push:
    paths:
      - 'App/**'       # –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –º–µ–Ω—è—é—Ç—Å—è —Ñ–∞–π–ª—ã –≤ App
      - 'scripts/**'
    branches: [ main ]

jobs:
  update-nav:
    runs-on: ubuntu-latest
    
    steps:
    - name: –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥
      uses: actions/checkout@v3
    
    - name: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
    
    - name: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
      run: npm install
    
    - name: –°–æ–∑–¥–∞—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
      run: node scripts/generate-navigation.js
    
    - name: –ó–∞–ø—É—à–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        git add index.html
        git commit -m "ü§ñ –ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏" || echo "–ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π"
        git push
